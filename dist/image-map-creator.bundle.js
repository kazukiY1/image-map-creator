!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(self,(()=>(()=>{var t={226:t=>{!function(){"use strict";var e={event:"click",position:"bottom",horizontalOffset:0,verticalOffset:0,data:{}},n=!1,i=null,o="context-menu",r=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},s=function(t){var e=arguments.length;if(e<2||null===t)return t;for(var n=1;n<e;n++){var i=arguments[n];for(var o in i)t[o]=i[o]}return t},a=function(t){var e;return"undefined"!=typeof jQuery&&t instanceof jQuery?t:t instanceof HTMLElement?[t]:"string"==typeof(e=t)||e instanceof String?document.querySelectorAll(t):t instanceof NodeList?t:[]},c=function(t){if(t.stopPropagation(),t.preventDefault(),i=t.target,d(),i.ctxMenu){var e=u(i);document.body.appendChild(e),n=!0,setTimeout((function(){window.addEventListener("click",d),window.addEventListener("resize",d),window.addEventListener("scroll",d),e.style.visibility="visible",l(t,i,e)}),1)}},u=function(t){var e,n=document.createElement("div");for(e in n.className=o,n.style.visibility="hidden",n.style.display="inline-block",t.ctxMenu.menu){var i=t.ctxMenu.menu[e],s=document.createElement("div");s.ctxMenu={key:e,enabled:!!i.enabled},s.ctxMenu.enabled?s.className="context-menu-item":s.className="context-menu-item-disabled",s.innerHTML=i&&i.label?i.label:e,s.ctxMenu.enabled&&(r(i.onSelect)?s.ctxMenu.onSelect=i.onSelect:s.ctxMenu.onSelect=h,s.addEventListener(t.ctxMenu.event,(function(e){this.ctxMenu.onSelect(t,this.ctxMenu.key,s,t.ctxMenu.data),d()}))),i.title&&(s.title=i.title),n.appendChild(s)}return n},l=function(t,e,n){var i=0,o=0,r=e.getBoundingClientRect(),s=n.getBoundingClientRect(),a="click";e.ctxMenu&&e.ctxMenu.position&&(a=e.ctxMenu.position),"bottom"===a?(i=r.left+e.ctxMenu.horizontalOffset,o=r.bottom+e.ctxMenu.verticalOffset):"top"===a?(i=r.left+e.ctxMenu.horizontalOffset,o=r.top-s.height+e.ctxMenu.verticalOffset):"right"===a?(i=r.left+r.width+e.ctxMenu.horizontalOffset,o=r.top+e.ctxMenu.verticalOffset):"left"===a?(i=r.left-s.width+e.ctxMenu.horizontalOffset,o=r.top+e.ctxMenu.verticalOffset):(i=t.clientX+e.ctxMenu.horizontalOffset,o=t.clientY+e.ctxMenu.verticalOffset),i<0&&(i=e.ctxMenu.horizontalOffset>=0?e.ctxMenu.horizontalOffset:0),o<0&&(o=e.ctxMenu.verticalOffset>=0?e.ctxMenu.verticalOffset:0),i+s.width>document.body.clientWidth&&(i=e.ctxMenu.horizontalOffset>=0?document.body.clientWidth-s.width:document.body.clientWidth-s.width+e.ctxMenu.horizontalOffset),o+s.height>document.body.clientHeight&&(o=e.ctxMenu.verticalOffset>=0?document.body.clientHeight-s.height:document.body.clientHeight-s.height+e.ctxMenu.verticalOffset),n.style.left=i+"px",n.style.top=o+"px"},h=function(t,e,n){},d=function(){var t=0,e=document.getElementsByClassName(o);for(window.removeEventListener("click",d),window.removeEventListener("resize",d),window.removeEventListener("scroll",d),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);n=!1},p=function(t,e,n){var i=0,o=a(t);for(i=0;i<o.length;i++)o[i].ctxMenu.menu.hasOwnProperty(e)&&(o[i].ctxMenu.menu[e].enabled=n)},f=function(t){var e,n={type:"item",enabled:!0,label:"",onSelect:function(){},icon:"",title:""};for(e in t){var i=s({},n);t[e]?r(t[e])?t[e]=s(i,{label:e,onSelect:t[e]}):t[e]=s(i,t[e]):t[e]=s(i,{label:e})}return t},v={attach:function(t,n,i){var o=0;n=f(n);var r=s({menu:s({},n)},e,i),u=a(t);for(o=0;o<u.length;o++)u[o].ctxMenu=r,u[o].addEventListener(r.event,c)},display:function(t,n,i){n=f(s({},n));var o=s({menu:s({},n)},e,i);if(t instanceof Event)t.target.ctxMenu=o,c(t);else if("undefined"!=typeof jQuery&&t instanceof jQuery.Event)t.target.ctxMenu=o,c(t);else if(t instanceof HTMLElement){t.ctxMenu=o;var r=t.getBoundingClientRect(),a={target:t,clientX:r.left,clientY:r.top,stopPropagation:function(){},preventDefault:function(){}};c(a)}else console.log(t)},disable:function(t,e){p(t,e,!1)},enable:function(t,e){p(t,e,!0)},close:function(){d()},isOpen:function(){return n}};"function"==typeof window.define&&void 0!==window.define.amd?window.define("ContextMenu",[],(function(){return v})):void 0!==t.exports?t.exports=v:window.ContextMenu=v}()},281:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(537),o=n.n(i),r=n(645),s=n.n(r)()(o());s.push([t.id,"div.context-menu {\n\tposition : fixed;\n\tborder: 1px solid #ccc;\n\tbackground-color: #eee;\n\tmin-width : 100px;\n\tpadding: 2px;\n\tbox-shadow : 2px 2px 4px #444;\n\tdisplay : inline-block;\n\tz-index : 10002;\n\tcursor : default;\n}\n\ndiv.context-menu>div {\n\tpadding : 5px 25px;\n\tfont-family: sans-serif;\n\tfont-size: 0.8em;\n}\n\ndiv.context-menu-item:hover {\n\tbackground-color : #c3d6ee;\n}\n\ndiv.context-menu-item-disabled {\n\tcolor : #aaa;\n}\n","",{version:3,sources:["webpack://./lib/contextmenu/contextmenu.css"],names:[],mappings:"AAAA;CACC,gBAAgB;CAChB,sBAAsB;CACtB,sBAAsB;CACtB,iBAAiB;CACjB,YAAY;CACZ,6BAA6B;CAC7B,sBAAsB;CACtB,eAAe;CACf,gBAAgB;AACjB;;AAEA;CACC,kBAAkB;CAClB,uBAAuB;CACvB,gBAAgB;AACjB;;AAEA;CACC,0BAA0B;AAC3B;;AAEA;CACC,YAAY;AACb",sourcesContent:["div.context-menu {\n\tposition : fixed;\n\tborder: 1px solid #ccc;\n\tbackground-color: #eee;\n\tmin-width : 100px;\n\tpadding: 2px;\n\tbox-shadow : 2px 2px 4px #444;\n\tdisplay : inline-block;\n\tz-index : 10002;\n\tcursor : default;\n}\n\ndiv.context-menu>div {\n\tpadding : 5px 25px;\n\tfont-family: sans-serif;\n\tfont-size: 0.8em;\n}\n\ndiv.context-menu-item:hover {\n\tbackground-color : #c3d6ee;\n}\n\ndiv.context-menu-item-disabled {\n\tcolor : #aaa;\n}\n"],sourceRoot:""}]);const a=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);i&&s[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},537:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),r="/*# ".concat(o," */"),s=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(s).concat([r]).join("\n")}return[e].join("\n")}},729:function(t,e){var n,i;void 0===(i="function"==typeof(n=function(){return function t(e,n,i){var o,r,s=window,a="application/octet-stream",c=i||a,u=e,l=!n&&!i&&u,h=document.createElement("a"),d=function(t){return String(t)},p=s.Blob||s.MozBlob||s.WebKitBlob||d,f=n||"download";if(p=p.call?p.bind(s):Blob,"true"===String(this)&&(c=(u=[u,c])[0],u=u[1]),l&&l.length<2048&&(f=l.split("/").pop().split("?")[0],h.href=l,-1!==h.href.indexOf(l))){var v=new XMLHttpRequest;return v.open("GET",l,!0),v.responseType="blob",v.onload=function(e){t(e.target.response,f,a)},setTimeout((function(){v.send()}),0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)){if(!(u.length>2096103.424&&p!==d))return navigator.msSaveBlob?navigator.msSaveBlob(y(u),f):x(u);c=(u=y(u)).type||a}else if(/([\x80-\xff])/.test(u)){for(var g=0,b=new Uint8Array(u.length),m=b.length;g<m;++g)b[g]=u.charCodeAt(g);u=new p([b],{type:c})}function y(t){for(var e=t.split(/[:;,]/),n=e[1],i=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),o=i.length,r=0,s=new Uint8Array(o);r<o;++r)s[r]=i.charCodeAt(r);return new p([s],{type:n})}function x(t,e){if("download"in h)return h.href=t,h.setAttribute("download",f),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout((function(){h.click(),document.body.removeChild(h),!0===e&&setTimeout((function(){s.URL.revokeObjectURL(h.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(o=u instanceof p?u:new p([u],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(o,f);if(s.URL)x(s.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===d)try{return x("data:"+c+";base64,"+s.btoa(o))}catch(t){return x("data:"+c+","+encodeURIComponent(o))}(r=new FileReader).onload=function(t){x(this.result)},r.readAsDataURL(o)}return!0}})?n.apply(e,[]):n)||(t.exports=i)},363:t=>{!function(){function e(t,e){var n=i("div",null,"qs_label",e);return n.innerHTML=t,n}function n(t,e,n,o){var r=i("input",e,n,o);return r.type=t,r}function i(t,e,n,i){var o=document.createElement(t);if(o)return o.id=e,n&&(o.className=n),i&&i.appendChild(o),o}function o(){return-1!=navigator.userAgent.indexOf("rv:11")||-1!=navigator.userAgent.indexOf("MSIE")}var r=!1,s={_version:"2.1",_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,useExtStyleSheet:function(){r=!0},create:function(t,e,n,i){var o=Object.create(this);return o._init(t,e,n,i),o},destroy:function(){for(var t in this._panel.parentElement&&this._panel.parentElement.removeChild(this._panel),this)this[t]=null},_init:function(t,e,n,i){r||function(){var t=document.createElement("style");t.innerText=".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",document.head.appendChild(t),r=!0}(),this._bindHandlers(),this._createPanel(t,e,i),this._createTitleBar(n||"QuickSettings"),this._createContent()},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},getValuesAsJSON:function(t){var e={};for(var n in this._controls)this._controls[n].getValue&&(e[n]=this._controls[n].getValue());return t&&(e=JSON.stringify(e)),e},setValuesFromJSON:function(t){for(var e in"string"==typeof t&&(t=JSON.parse(t)),t)this._controls[e].setValue&&this._controls[e].setValue(t[e]);return this},saveInLocalStorage:function(t){return this._localStorageName=t,this._readFromLocalStorage(t),this},clearLocalStorage:function(t){return localStorage.removeItem(t),this},_saveInLocalStorage:function(t){localStorage.setItem(t,this.getValuesAsJSON(!0))},_readFromLocalStorage:function(t){var e=localStorage.getItem(t);e&&this.setValuesFromJSON(e)},_createPanel:function(t,e,n){this._panel=i("div",null,"qs_main",n||document.body),this._panel.style.zIndex=++s._topZ,this.setPosition(t||0,e||0),this._controls={}},_createTitleBar:function(t){this._titleBar=i("div",null,"qs_title_bar",this._panel),this._titleBar.textContent=t,this._titleBar.addEventListener("mousedown",this._startDrag),this._titleBar.addEventListener("dblclick",this._doubleClickTitle)},_createContent:function(){this._content=i("div",null,"qs_content",this._panel)},_createContainer:function(){var t=i("div",null,"qs_container");return t.addEventListener("focus",(function(){this.className+=" qs_container_selected"}),!0),t.addEventListener("blur",(function(){var t=this.className.indexOf(" qs_container_selected");t>-1&&(this.className=this.className.substr(0,t))}),!0),this._content.appendChild(t),t},setPosition:function(t,e){return this._panel.style.left=t+"px",this._panel.style.top=Math.max(e,0)+"px",this},setSize:function(t,e){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this._content.style.height=e-this._titleBar.offsetHeight+"px",this},setWidth:function(t){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this},setHeight:function(t){return this._content.style.height=t-this._titleBar.offsetHeight+"px",this},setDraggable:function(t){return this._draggable=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},_startDrag:function(t){this._draggable&&(this._panel.style.zIndex=++s._topZ,document.addEventListener("mousemove",this._drag),document.addEventListener("mouseup",this._endDrag),this._startX=t.clientX,this._startY=t.clientY),t.preventDefault()},_drag:function(t){var e=parseInt(this._panel.style.left),n=parseInt(this._panel.style.top),i=t.clientX,o=t.clientY;this.setPosition(e+i-this._startX,n+o-this._startY),this._startX=i,this._startY=o,t.preventDefault()},_endDrag:function(t){document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._endDrag),t.preventDefault()},setGlobalChangeHandler:function(t){return this._globalChangeHandler=t,this},_callGCH:function(){this._localStorageName&&this._saveInLocalStorage(this._localStorageName),this._globalChangeHandler&&this._globalChangeHandler()},hide:function(){return this._panel.style.visibility="hidden",this._hidden=!0,this},show:function(){return this._panel.style.visibility="visible",this._panel.style.zIndex=++s._topZ,this._hidden=!1,this},toggleVisibility:function(){return this._hidden?this.show():this.hide(),this},setCollapsible:function(t){return this._collapsible=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},collapse:function(){return this._panel.removeChild(this._content),this._collapsed=!0,this},expand:function(){return this._panel.appendChild(this._content),this._collapsed=!1,this},toggleCollapsed:function(){return this._collapsed?this.expand():this.collapse(),this},setKey:function(t){return this._keyCode=t.toUpperCase().charCodeAt(0),document.body.addEventListener("keyup",this.onKeyUp),this},_onKeyUp:function(t){t.keyCode===this._keyCode&&this.toggleVisibility()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},removeControl:function(t){if(this._controls[t])var e=this._controls[t].container;return e&&e.parentElement&&e.parentElement.removeChild(e),this._controls[t]=null,this},enableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!1),this},disableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!0),this},hideControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="none"),this},showControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="block"),this},overrideStyle:function(t,e,n){return this._controls[t]&&(this._controls[t].control.style[e]=n),this},hideTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="none"),this},showTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="block"),this},hideAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="none")}return this},showAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="block")}return this},getValue:function(t){return this._controls[t].getValue()},setValue:function(t,e){return this._controls[t].setValue(e),this._callGCH(),this},addBoolean:function(t,e,o){var r=this._createContainer(),s=i("label",null,"qs_checkbox_label",r);s.textContent=t,s.setAttribute("for",t);var a=i("label",null,"qs_checkbox",r);a.setAttribute("for",t);var c=n("checkbox",t,null,a);c.checked=e,i("span",null,null,a),this._controls[t]={container:r,control:c,getValue:function(){return this.control.checked},setValue:function(t){this.control.checked=t,o&&o(t)}};var u=this;return c.addEventListener("change",(function(){o&&o(c.checked),u._callGCH()})),this},bindBoolean:function(t,e,n){return this.addBoolean(t,e,(function(e){n[t]=e}))},addButton:function(t,e){var i=this._createContainer(),o=n("button",t,"qs_button",i);o.value=t,this._controls[t]={container:i,control:o};var r=this;return o.addEventListener("click",(function(){e&&e(o),r._callGCH()})),this},addColor:function(t,r,s){if(function(){var t=navigator.userAgent.toLowerCase();return!(t.indexOf("chrome")>-1||t.indexOf("firefox")>-1||t.indexOf("epiphany")>-1)&&t.indexOf("safari/")>-1}()||navigator.userAgent.toLowerCase().indexOf("edge")>-1||o())return this.addText(t,r,s);var a=this._createContainer(),c=e("<b>"+t+":</b> "+r,a),u=n("color",t,"qs_color",a);u.value=r||"#ff0000";var l=i("label",null,"qs_color_label",a);l.setAttribute("for",t),l.style.backgroundColor=u.value,this._controls[t]={container:a,control:u,colorLabel:l,label:c,title:t,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,this.colorLabel.style.backgroundColor=u.value,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,s&&s(t)}};var h=this;return u.addEventListener("input",(function(){c.innerHTML="<b>"+t+":</b> "+u.value,l.style.backgroundColor=u.value,s&&s(u.value),h._callGCH()})),this},bindColor:function(t,e,n){return this.addColor(t,e,(function(e){n[t]=e}))},addDate:function(t,i,r){var s;if(i instanceof Date){var a=i.getFullYear(),c=i.getMonth()+1;c<10&&(c="0"+c),s=a+"-"+c+"-"+i.getDate()}else s=i;if(o())return this.addText(t,s,r);var u=this._createContainer(),l=e("<b>"+t+"</b>",u),h=n("date",t,"qs_text_input",u);h.value=s||"",this._controls[t]={container:u,control:h,label:l,getValue:function(){return this.control.value},setValue:function(t){var e;if(t instanceof Date){var n=t.getFullYear(),i=t.getMonth()+1;i<10&&(i="0"+i);var o=t.getDate();o<10&&(o="0"+o),e=n+"-"+i+"-"+o}else e=t;this.control.value=e||"",r&&r(e)}};var d=this;return h.addEventListener("input",(function(){r&&r(h.value),d._callGCH()})),this},bindDate:function(t,e,n){return this.addDate(t,e,(function(e){n[t]=e}))},addDropDown:function(t,n,o){for(var r=this._createContainer(),s=e("<b>"+t+"</b>",r),a=i("select",null,"qs_select",r),c=0;c<n.length;c++){var u=i("option");u.label=n[c],u.innerText=n[c],a.add(u)}var l=this;return a.addEventListener("change",(function(){var t=a.selectedIndex,e=a.options;o&&o({index:t,value:e[t].label}),l._callGCH()})),this._controls[t]={container:r,control:a,label:s,getValue:function(){var t=this.control.selectedIndex;return{index:t,value:this.control.options[t].label}},setValue:function(t){var e;e=null!=t.index?t.index:t;var n=this.control.options;this.control.selectedIndex=e,o&&o({index:e,value:n[e].label})}},this},bindDropDown:function(t,e,n){return this.addDropDown(t,e,(function(e){n[t]=e.value}))},addElement:function(t,n){var i=this._createContainer(),o=e("<b>"+t+"</b>",i);return i.appendChild(n),this._controls[t]={container:i,label:o},this},addFileChooser:function(t,o,r,s){var a=this._createContainer(),c=e("<b>"+t+"</b>",a),u=n("file",t,"qs_file_chooser",a);r&&(u.accept=r);var l=i("label",null,"qs_file_chooser_label",a);l.setAttribute("for",t),l.textContent=o||"Choose a file...",this._controls[t]={container:a,control:u,label:c,getValue:function(){return this.control.files[0]}};var h=this;return u.addEventListener("change",(function(){u.files&&u.files.length&&(l.textContent=u.files[0].name,s&&s(u.files[0]),h._callGCH())})),this},addHTML:function(t,n){var o=this._createContainer(),r=e("<b>"+t+":</b> ",o),s=i("div",null,null,o);return s.innerHTML=n,this._controls[t]={label:r,control:s,getValue:function(){return this.control.innerHTML},setValue:function(t){this.control.innerHTML=t}},this},addImage:function(t,n){var o=this._createContainer(),r=e("<b>"+t+"</b>",o);return img=i("img",null,"qs_image",o),img.src=n,this._controls[t]={container:o,control:img,label:r,getValue:function(){return this.control.src},setValue:function(t){this.control.src=t}},this},addRange:function(t,e,n,i,o,r){return this._addNumber("range",t,e,n,i,o,r)},addNumber:function(t,e,n,i,o,r){return this._addNumber("number",t,e,n,i,o,r)},_addNumber:function(t,i,r,s,a,c,u){var l=this._createContainer(),h=e("",l),d=n(t,i,"range"===t?"qs_range":"qs_text_input qs_number",l);d.min=r||0,d.max=s||100,d.step=c||1,d.value=a||0,h.innerHTML="<b>"+i+":</b> "+d.value,this._controls[i]={container:l,control:d,label:h,title:i,callback:u,getValue:function(){return parseFloat(this.control.value)},setValue:function(t){this.control.value=t,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,u&&u(parseFloat(t))}};var p="input";"range"===t&&o()&&(p="change");var f=this;return d.addEventListener(p,(function(){h.innerHTML="<b>"+i+":</b> "+d.value,u&&u(parseFloat(d.value)),f._callGCH()})),this},bindRange:function(t,e,n,i,o,r){return this.addRange(t,e,n,i,o,(function(e){r[t]=e}))},bindNumber:function(t,e,n,i,o,r){return this.addNumber(t,e,n,i,o,(function(e){r[t]=e}))},setRangeParameters:function(t,e,n,i){return this.setNumberParameters(t,e,n,i)},setNumberParameters:function(t,e,n,i){var o=this._controls[t],r=o.control.value;return o.control.min=e,o.control.max=n,o.control.step=i,o.control.value!==r&&o.callback&&o.callback(o.control.value),this},addPassword:function(t,e,n){return this._addText("password",t,e,n)},bindPassword:function(t,e,n){return this.addPassword(t,e,(function(e){n[t]=e}))},addProgressBar:function(t,n,o,r){var s=this._createContainer(),a=e("",s),c=i("div",null,"qs_progress",s),u=i("div",null,"qs_progress_value",c);return u.style.width=o/n*100+"%",a.innerHTML="numbers"===r?"<b>"+t+":</b> "+o+" / "+n:"percent"===r?"<b>"+t+":</b> "+Math.round(o/n*100)+"%":"<b>"+t+"</b>",this._controls[t]={container:s,control:c,valueDiv:u,valueDisplay:r,label:a,value:o,max:n,title:t,getValue:function(){return this.value},setValue:function(t){this.value=Math.max(0,Math.min(t,this.max)),this.valueDiv.style.width=this.value/this.max*100+"%","numbers"===this.valueDisplay?this.label.innerHTML="<b>"+this.title+":</b> "+this.value+" / "+this.max:"percent"===this.valueDisplay&&(this.label.innerHTML="<b>"+this.title+":</b> "+Math.round(this.value/this.max*100)+"%")}},this},setProgressMax:function(t,e){var n=this._controls[t];return n.max=e,n.value=Math.min(n.value,n.max),n.valueDiv.style.width=n.value/n.max*100+"%","numbers"===n.valueDisplay?n.label.innerHTML="<b>"+n.title+":</b> "+n.value+" / "+n.max:"percent"===n.valueDisplay?n.label.innerHTML="<b>"+n.title+":</b> "+Math.round(n.value/n.max*100)+"%":n.label.innerHTML="<b>"+n.title+"</b>",this},addText:function(t,e,n){return this._addText("text",t,e,n)},_addText:function(t,o,r,s){var a,c=this._createContainer(),u=e("<b>"+o+"</b>",c);"textarea"===t?(a=i("textarea",o,"qs_textarea",c)).rows=5:a=n(t,o,"qs_text_input",c),a.value=r||"",this._controls[o]={container:c,control:a,label:u,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,s&&s(t)}};var l=this;return a.addEventListener("input",(function(){s&&s(a.value),l._callGCH()})),this},bindText:function(t,e,n){return this.addText(t,e,(function(e){n[t]=e}))},addTextArea:function(t,e,n){return this._addText("textarea",t,e,n)},setTextAreaRows:function(t,e){return this._controls[t].control.rows=e,this},bindTextArea:function(t,e,n){return this.addTextArea(t,e,(function(e){n[t]=e}))},addTime:function(t,i,r){var s;if(i instanceof Date){var a=i.getHours();a<10&&(a="0"+a);var c=i.getMinutes();c<10&&(c="0"+c);var u=i.getSeconds();u<10&&(u="0"+u),s=a+":"+c+":"+u}else s=i;if(o())return this.addText(t,s,r);var l=this._createContainer(),h=e("<b>"+t+"</b>",l),d=n("time",t,"qs_text_input",l);d.value=s||"",this._controls[t]={container:l,control:d,label:h,getValue:function(){return this.control.value},setValue:function(t){var e;if(t instanceof Date){var n=t.getHours();n<10&&(n="0"+n);var i=t.getMinutes();i<10&&(i="0"+i);var o=t.getSeconds();o<10&&(o="0"+o),e=n+":"+i+":"+o}else e=t;this.control.value=e||"",r&&r(e)}};var p=this;return d.addEventListener("input",(function(){r&&r(d.value),p._callGCH()})),this},bindTime:function(t,e,n){return this.addTime(t,e,(function(e){n[t]=e}))}};t.exports=s}()},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},s=[],a=0;a<t.length;a++){var c=t[a],u=i.base?c[0]+i.base:c[0],l=r[u]||0,h="".concat(u," ").concat(l);r[u]=l+1;var d=n(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=o(p,i);i.byIndex=a,e.splice(a,0,{identifier:h,updater:f,references:1})}s.push(h)}return s}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=i(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=n(r[s]);e[a].references--}for(var c=i(t,o),u=0;u<r.length;u++){var l=n(r[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},307:(t,e,n)=>{var i;!function(){"use strict";var o=function(){var t,e,n=[],i=-1,o=0,r=!1;return e=function(t,e){return t&&"function"==typeof t[e]?(r=!0,t[e](),r=!1,this):this},{add:function(e){return r||(n.splice(i+1,n.length-i),n.push(e),o&&n.length>o&&(0,a=-(o+1),(s=n).splice(0,!a||1+a-0+(!(a<0^!0)&&(a<0||-1)*s.length)),s.length),i=n.length-1,t&&t()),this;var s,a},setCallback:function(e){t=e},undo:function(){var o=n[i];return o?(e(o,"undo"),i-=1,t&&t(),this):this},redo:function(){var o=n[i+1];return o?(e(o,"redo"),i+=1,t&&t(),this):this},clear:function(){var e=n.length;n=[],i=-1,t&&e>0&&t()},hasUndo:function(){return-1!==i},hasRedo:function(){return i<n.length-1},getCommands:function(){return n},getIndex:function(){return i},setLimit:function(t){o=t}}};void 0===(i=function(){return o}.call(e,n,e,t))||(t.exports=i)}()},147:t=>{"use strict";t.exports={i8:"1.1.12"}}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{"use strict";n.r(i),n.d(i,{Save:()=>q,imageMapCreator:()=>V});var t=n(729);function e(t,e){return parseFloat(t.toFixed(e))}var o,r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.fromObject=function(e){return new t(e.x,e.y)},t.dist=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.swap=function(t,e,n){var i=t[n];t[n]=e[n],e[n]=i},t.prototype.isEmpty=function(){return!this.x&&!this.y},t.prototype.oneIsEmpty=function(){return!this.x||!this.y},t.prototype.sum=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.diff=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.move=function(t){this.add(t)},t.prototype.getPosition=function(){return this},t.prototype.setPosition=function(t){return this.set(t.x,t.y),this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.invert=function(){return new t(-this.x,-this.y)},t.prototype.toStr=function(t,n,i){return e(this[n]*i,t).toString()},t.prototype.toHtml=function(t,e){return void 0===e&&(e=1),this.toStr(t,"x",e)+","+this.toStr(t,"y",e)},t}(),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(){function t(t,e,n,i,o){void 0===e&&(e=[]),void 0===n&&(n=""),void 0===i&&(i=""),void 0===o&&(o=0),this.shape=t,this.coords=e,this.href=n,this.title=i,this.id=o}return t.fromObject=function(t){switch(t.shape){case"rect":var e=t;return new h(e.coords.map(r.fromObject),e.href,e.title,e.id);case"circle":var n=t;return new u(n.coords.map(r.fromObject),n.radius,n.href,n.title,n.id);case"poly":var i=t;return new l(i.coords.map(r.fromObject),i.href,i.title,i.id,i.closed);case"default":var o=t;return new d(o.iMap,o.href,o.title);default:throw"Not an area"}},t.prototype.getId=function(){return this.id},t.prototype.setShape=function(t){return this.shape=t,this},t.prototype.getShape=function(){return this.shape},t.prototype.addCoord=function(t){return this.coords.push(t)},t.prototype.popCode=function(){0!==this.coords.length&&this.coords.pop()},t.prototype.setCoords=function(t){return this.coords=t,this},t.prototype.getCoords=function(){return this.coords},t.prototype.drawingCoords=function(){return this.coords.slice()},t.prototype.getPoints=function(){return this.coords},t.prototype.isEmpty=function(){return 0==this.coords.length},t.prototype.equals=function(t){return this.id==t.id},t.prototype.copyCoords=function(){var t=[];return this.coords.forEach((function(e,n){t[n]=new r(e.x,e.y)})),t},t.prototype.updateLastCoord=function(t){return this.coords[this.coords.length-1]=t,this},t.prototype.move=function(t){var e=this.firstCoord();null!=t&&e.add(t)},t.prototype.getPosition=function(){return this.firstCoord()},t.prototype.setPosition=function(t){var e=this.coords[0].diff(t);this.move(e)},t.prototype.isValidShape=function(){return this.isDrawable()},t.prototype.isOverPoint=function(t,e){return this.getPoints().find((function(n){return r.dist(t,n)<e}))||!1},t.prototype.setHref=function(t){return this.href=t,this},t.prototype.getHref=function(){return this.href},t.prototype.getHrefVerbose=function(){return""===this.href?"undefined":this.href},t.prototype.setTitle=function(t){return this.title=t,this},t.prototype.getTitle=function(){return this.title},t.prototype.setId=function(t){return this.id=t,this},t.prototype.firstCoord=function(){return this.coords[0]},t.prototype.htmlCoords=function(t,e){return this.drawingCoords().map((function(n){return n.toHtml(t,e)})).join(",")},t.prototype.toHtml=function(t){void 0===t&&(t=1);var e=this.htmlCoords(0,t);e=e?'coords="'.concat(e,'"'):"";var n=this.href?'href="'.concat(this.href,'"'):"nohref",i=this.title?'title="'.concat(this.title,'"'):"";return'<area shape="'.concat(this.shape,'" ').concat(e," ").concat(n,' alt="').concat(this.href,'" ').concat(i," />")},t.prototype.toSvg=function(t){return void 0===t&&(t=1),'<a xlink:href="'.concat(this.href,'">').concat(this.svgArea(t),"</a>")},t}(),c=function(t){function e(){return t.call(this,"empty")||this}return s(e,t),e.prototype.isDrawable=function(){return!1},e.prototype.svgArea=function(t){return""},e.prototype.isOver=function(t){return!1},e.prototype.display=function(t){},e}(a),u=function(t){function n(e,n,i,o,r){void 0===e&&(e=[]),void 0===n&&(n=0),void 0===i&&(i=""),void 0===o&&(o=""),void 0===r&&(r=0);var s=t.call(this,"circle",e,i,o,r)||this;return s.radius=n,s}return s(n,t),n.prototype.getCenter=function(){return this.firstCoord()},n.prototype.isValidShape=function(){return t.prototype.isValidShape.call(this)&&this.radius>0},n.prototype.isDrawable=function(){return 1==this.coords.length},n.prototype.isOver=function(t){var e=this.getCenter();return r.dist(t,e)<this.radius},n.prototype.updateLastCoord=function(t){var e=this.getCenter();return this.radius=r.dist(e,t),this},n.prototype.display=function(t){t.ellipse(this.getCenter().x,this.getCenter().y,2*this.radius)},n.prototype.htmlCoords=function(t,n){return this.getCenter().toHtml(t,n)+","+e(this.radius,t)},n.prototype.svgArea=function(t){var n=this.coords[0].toStr(0,"x",t),i=this.coords[0].toStr(0,"y",t),o=e(this.radius,0);return'<circle cx="'.concat(n,'" cy="').concat(i,'" r="').concat(o,'" />')},n}(a),l=function(t){function e(e,n,i,o,r){void 0===e&&(e=[]),void 0===n&&(n=""),void 0===i&&(i=""),void 0===o&&(o=0),void 0===r&&(r=!1);var s=t.call(this,"poly",e,n,i,o)||this;return s.closed=r,s}return s(e,t),e.prototype.isDrawable=function(){return this.coords.length>=2},e.prototype.isValidShape=function(){return t.prototype.isValidShape.call(this)&&this.closed},e.prototype.isOver=function(t){var e,n=t.x,i=t.y,o=this.coords.map((function(t){return t.x})),r=this.coords.map((function(t){return t.y})),s=o.length-1,a=0,c=o,u=r;for(e=0;e<o.length;e++)(u[e]<i&&u[s]>=i||u[s]<i&&u[e]>=i)&&(c[e]<=n||c[s]<=n)&&(a^=c[e]+(i-u[e])/(u[s]-u[e])*(c[s]-c[e])<n?1:0),s=e;return Boolean(a)},e.prototype.isClosable=function(t,e){var n=r.dist(t,this.firstCoord());return this.coords.length>=4&&n<e},e.prototype.drawingCoords=function(){var e=t.prototype.drawingCoords.call(this);return this.closed&&e.push(this.firstCoord()),e},e.prototype.close=function(){return this.closed=!0,this.coords.pop(),this},e.prototype.move=function(t){this.coords.map((function(e){return e.add(t)}))},e.prototype.display=function(t){t.beginShape(),this.drawingCoords().forEach((function(e){return t.vertex(e.x,e.y)})),t.endShape()},e.prototype.svgArea=function(t){var e=this.drawingCoords().map((function(e){return e.toStr(0,"x",t)+","+e.toStr(0,"y",t)})).join(" ");return'<polygon points="'.concat(e,'" />')},e}(a),h=function(t){function e(e,n,i,o){void 0===e&&(e=[]),void 0===n&&(n=""),void 0===i&&(i=""),void 0===o&&(o=0);var r=t.call(this,e,n,i,o,!0)||this;if(r.coords.length>0&&r.coords.length<4){var s=r.firstCoord();r.coords=[s,s.clone(),s.clone(),s.clone()]}return r}return s(e,t),e.prototype.isValidShape=function(){return t.prototype.isValidShape.call(this)&&!this.isNullArea()},e.prototype.isNullArea=function(){return this.coords[0].x==this.coords[1].x||this.coords[0].y==this.coords[3].y},e.prototype.updateLastCoord=function(t){return this.coords[1].x=t.x,this.coords[2]=t,this.coords[3].y=t.y,this},e}(l),d=function(t){function e(e,n,i){void 0===n&&(n=""),void 0===i&&(i="");var o=t.call(this,"default",[],n,i)||this;return o.iMap=e,o.isDefault=!0,o}return s(e,t),e.prototype.isDrawable=function(){return!0},e.prototype.isOver=function(){return!0},e.prototype.display=function(t){t.rect(0,0,this.iMap.width-1,this.iMap.height-1)},e.prototype.svgArea=function(t){return'<rect x="0" y="0" width="100%" height="100%" />'},e}(a),p=function(){function t(t,e,n,i,o){void 0===n&&(n=[]),void 0===i&&(i=""),void 0===o&&(o=!1),this.width=t,this.height=e,this.areas=n,this.name=i,this.hasDefaultArea=o,this.dArea=new d(this),this.lastId=0}return t.prototype.setFromObject=function(t){var e=t;return e.dArea.iMap=this,this.width=e.width,this.height=e.height,this.areas=e.areas.map(a.fromObject),this.name=e.name,this.hasDefaultArea=e.hasDefaultArea,this.dArea=a.fromObject(e.dArea),this},t.prototype.setName=function(t){return t&&(this.name=t.replace(/\s+/g,"")),this},t.prototype.getName=function(){return this.name},t.prototype.setSize=function(t,e){return this.width=t,this.height=e,this},t.prototype.setDefaultArea=function(t){return this.hasDefaultArea=t,this},t.prototype.getAreas=function(t){void 0===t&&(t=!0);var e=this.areas.slice();return t&&this.hasDefaultArea&&e.push(this.dArea),e},t.prototype.isEmpty=function(){return 0==this.getAreas().length},t.prototype.addArea=function(t,e){return void 0===e&&(e=!0),e&&t.setId(this.getNewId()),this.areas.unshift(t),t.id},t.prototype.rmvArea=function(t){var e=this.areaIndex(t);return this.areas.splice(e,1),e},t.prototype.moveArea=function(t,e){var n=this.areaIndex(t),i=this.areas[n],o=n+e;return!(o<0||o>=this.areas.length)&&(this.rmvArea(t),this.insertArea(i,o),o)},t.prototype.shiftArea=function(){return this.areas.shift()},t.prototype.popArea=function(){return this.areas.pop()},t.prototype.insertArea=function(t,e){return this.areas.splice(e,0,t),this.areas.length},t.prototype.areaIndex=function(t){return this.areas.findIndex((function(e){return e.id==t}))},t.prototype.isFirstArea=function(t){return 0==this.areaIndex(t)},t.prototype.isLastArea=function(t){return this.areaIndex(t)==this.areas.length-1},t.prototype.getNewId=function(){return this.lastId++,this.lastId},t.prototype.toHtml=function(t){void 0===t&&(t=1);var e=[];return this.getAreas().forEach((function(n){n.isValidShape()&&e.push("\t"+n.toHtml(t))})),'<map name="'+this.name+'" id="'+this.name+'">\n'+e.join("\n")+"\n</map>"},t.prototype.toSvg=function(t){void 0===t&&(t=1);var e=[];this.getAreas(!1).forEach((function(n){n.isValidShape()&&e.push("\t"+n.toSvg(t))}));var n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.width+'" height="'+this.height+'">\n';return(n+=e.join("\n"))+"\n</svg>"},t.prototype.clearAreas=function(){return this.areas=[],this},t.prototype.setAreas=function(t){return this.areas=t,this},t}(),f=function(){function t(){this.origin=new r,this.position=this.origin.clone(),this.areas=new Map,this.points=new Map}return t.prototype.resetOrigin=function(t){void 0===t&&(t=new r),this.origin=t.clone(),this.position=t,this.addPoint(t)},t.prototype.registerArea=function(t){this.areas.set(t.getId(),t)},t.prototype.addArea=function(t){var e=this;this.registerArea(t),t.getCoords().forEach((function(t){return e.addPoint(t)}))},t.prototype.addPoint=function(t){var e=this.points.get(t)||0;this.points.set(t,e+1)},t.prototype.containsArea=function(t){return this.areas.has(t.getId())},t.prototype.containsPoint=function(t){return this.points.has(t)},t.prototype.distToOrigin=function(){return this.getPosition().diff(this.origin)},t.prototype.clear=function(){this.areas.clear(),this.points.clear(),this.origin=new r},t.prototype.isEmpty=function(){return 0==this.points.size},t.prototype.move=function(t){this.points.forEach((function(e,n){n.move(t)}))},t.prototype.getPosition=function(){return this.position},t.prototype.setPosition=function(t){var e=t.diff(this.position);this.move(e)},t}(),v=function(){function t(t,e,n,i){void 0===e&&(e=15),void 0===n&&(n=0),void 0===i&&(i=!1),this.iMap=t,this.speed=e,this.alpha=n,this.over=i}return t.prototype.appear=function(){this.over=!0},t.prototype.disappear=function(){this.over=!1},t.prototype.display=function(){this.over?this.alpha<100&&(this.alpha+=this.speed):this.alpha>0&&(this.alpha-=this.speed),this.iMap.p5.noStroke(),this.iMap.p5.fill(255,255,255,this.alpha),this.iMap.p5.rect(this.iMap.trueX(0),this.iMap.trueY(0),this.iMap.p5.width/this.iMap.view.scale,this.iMap.p5.height/this.iMap.view.scale)},t}(),g=n(307),b=n.n(g),m=n(363),y=n.n(m),x=n(226),A=n(379),_=n.n(A),w=n(795),C=n.n(w),k=n(569),M=n.n(k),S=n(565),T=n.n(S),O=n(216),E=n.n(O),B=n(589),L=n.n(B),D=n(281),z={};z.styleTagTransform=L(),z.setAttributes=T(),z.insert=M().bind(null,"head"),z.domAPI=C(),z.insertStyleElement=E(),_()(D.Z,z),D.Z&&D.Z.locals&&D.Z.locals;var H=n(147).i8,q=function(t,e){this.version=t,this.map=e},V=function(){function e(t,e,n){void 0===e&&(e=600),void 0===n&&(n=450);var i=this;this.menu={SetUrl:{onSelect:function(t,e,n,o){i.setAreaUrl(o)},label:"Set url"},SetTitle:{onSelect:function(t,e,n,o){i.setAreaTitle(o)},label:"Set title"},Delete:function(t,e,n,o){i.deleteArea(o)},MoveFront:{onSelect:function(t,e,n,o){i.moveArea(o,-1)},enabled:!0,label:"Move Forward"},MoveBack:{onSelect:function(t,e,n,o){i.moveArea(o,1)},enabled:!0,label:"Move Backward"}};var o=document.getElementById(t);if(!o)throw new Error("HTMLElement not found");this.width=e,this.height=n,this.tool="polygon",this.drawingTools=["rectangle","circle","polygon"],this.settings,this.tempArea=new c,this.selection=new f,this.hoveredArea=null,this.hoveredPoint=null,this.map=new p(e,n),this.undoManager=new(b()),this.img={data:null,file:null},this.view={scale:1,transX:0,transY:0},this.zoomParams={min:.03,max:3,sensativity:.001},this.magnetism=!0,this.fusion=!1,this.tolerance=6,this.bgLayer=new v(this),this.p5=new p5(this.sketch.bind(this),o)}return e.prototype.sketch=function(t){this.p5=t,t.setup=this.setup.bind(this),t.draw=this.draw.bind(this),t.mousePressed=this.mousePressed.bind(this),t.mouseDragged=this.mouseDragged.bind(this),t.mouseReleased=this.mouseReleased.bind(this),t.mouseWheel=this.mouseWheel.bind(this),t.keyPressed=this.keyPressed.bind(this)},e.prototype.setup=function(){var t=this;this.p5.createCanvas(this.width,this.height).drop(this.handeFile.bind(this)).dragLeave(this.onLeave.bind(this)).dragOver(this.onOver.bind(this)),this.settings=y().create(this.p5.width+5,0,"Image-map Creator",this.p5.canvas.parentElement).setDraggable(!1).addText("Map Name","",(function(e){t.map.setName(e)})).addDropDown("Tool",["polygon","rectangle","circle","select","delete","test"],(function(e){t.setTool(e.value)})).addBoolean("Default Area",this.map.hasDefaultArea,(function(e){t.setDefaultArea(e)})).addTextArea("Output").addButton("Undo",this.undoManager.undo).addButton("Redo",this.undoManager.redo).addButton("Clear",this.clearAreas.bind(this)).addButton("Generate Html",(function(){t.settings.setValue("Output",t.map.toHtml())})).addButton("Generate Svg",(function(){t.settings.setValue("Output",t.map.toSvg())})).addButton("Save",this.save.bind(this)),this.p5.canvas.addEventListener("contextmenu",(function(t){t.preventDefault()})),this.p5.canvas.addEventListener("mousedown",(function(t){t.preventDefault()})),document.getElementById("Output").setAttribute("onFocus","this.select();")},e.prototype.draw=function(){this.updateTempArea(),this.updateHovered(),this.setCursor(),this.setOutput(),this.setBackground(),this.setTitle(this.hoveredArea),this.p5.translate(this.view.transX,this.view.transY),this.p5.scale(this.view.scale),this.drawImage(),this.bgLayer.display(),this.drawAreas()},e.prototype.mousePressed=function(){if(this.mouseIsHoverSketch()){var t=this.drawingCoord();if(this.p5.mouseButton==this.p5.LEFT&&!x.isOpen())switch(this.tool){case"circle":case"rectangle":this.setTempArea(t);break;case"polygon":var e=this.tempArea;e.isEmpty()?this.setTempArea(t):e.isClosable(this.mCoord(),this.tolerance/this.view.scale)?(e.close(),e.isValidShape()&&this.createArea(e),this.tempArea=new c):this.tempArea.addCoord(this.mCoord());break;case"select":null!==this.hoveredPoint?(this.selection.addPoint(this.hoveredPoint),this.selection.registerArea(this.hoveredArea),this.selection.resetOrigin(this.hoveredPoint)):null!==this.hoveredArea&&(this.selection.addArea(this.hoveredArea),this.selection.resetOrigin(this.mCoord()))}}},e.prototype.mouseDragged=function(){this.mouseIsHoverSketch()&&!x.isOpen()&&(this.p5.mouseButton==this.p5.LEFT?"select"===this.tool&&this.selection.setPosition(this.drawingCoord()):"t"!=this.p5.key&&this.p5.mouseButton!=this.p5.CENTER||(this.view.transX+=this.p5.mouseX-this.p5.pmouseX,this.view.transY+=this.p5.mouseY-this.p5.pmouseY))},e.prototype.mouseReleased=function(t){switch(this.tool){case"rectangle":case"circle":this.tempArea.isValidShape()&&this.createArea(this.tempArea),this.tempArea=new c;break;case"select":var e=this.selection;if(!e.isEmpty()){var n=this.selection.distToOrigin();this.undoManager.add({undo:function(){return e.move(n.invert())},redo:function(){return e.move(n)}})}this.selection=new f}this.onClick(t),this.bgLayer.disappear()},e.prototype.mouseWheel=function(t){if(this.mouseIsHoverSketch()){var e=this.view.scale*this.zoomParams.sensativity*-t.deltaY;return this.zoom(e),!1}return!0},e.prototype.keyPressed=function(t){if(t.composed&&t.ctrlKey){switch(t.key){case"s":this.save();break;case"z":this.undoManager.undo();break;case"y":this.undoManager.redo();break;case"x":console.log(this.tempArea),this.tempArea.popCode();break;default:return!0}return!1}return"polygon"!=this.tool||t.keyCode!=this.p5.ESCAPE||(this.tempArea=new c,!1)},e.prototype.trueX=function(t){return(t-this.view.transX)/this.view.scale},e.prototype.trueY=function(t){return(t-this.view.transY)/this.view.scale},e.prototype.mX=function(){return this.trueX(this.p5.mouseX)},e.prototype.mY=function(){return this.trueY(this.p5.mouseY)},e.prototype.mCoord=function(){return new r(this.mX(),this.mY())},e.prototype.drawingCoord=function(){var t=this.mCoord();return t=this.magnetism&&this.hoveredPoint?this.hoveredPoint:t,this.fusion||(t=t.clone()),t},e.prototype.mouseIsHoverSketch=function(){return this.p5.mouseX<=this.p5.width&&this.p5.mouseX>=0&&this.p5.mouseY<=this.p5.height&&this.p5.mouseY>=0},e.prototype.updateHovered=function(){var t=this;this.hoveredPoint=null;var e=this.map.getAreas().find((function(e){if(t.selection.containsArea(e))return!1;if("test"!=t.tool){var n=e.isOverPoint(t.mCoord(),t.tolerance/t.view.scale);if(n&&!t.selection.containsPoint(n))return t.hoveredPoint=n,!0}return!!e.isOver(t.mCoord())}));this.p5.mouseIsPressed||(this.hoveredArea=e||null)},e.prototype.onClick=function(t){if(this.mouseIsHoverSketch()&&this.hoveredArea)if(this.p5.mouseButton==this.p5.RIGHT)this.selection.addArea(this.hoveredArea),this.menu.MoveFront.enabled=!(this.map.isFirstArea(this.hoveredArea.id)||"default"==this.hoveredArea.getShape()),this.menu.MoveBack.enabled=!(this.map.isLastArea(this.hoveredArea.id)||"default"==this.hoveredArea.getShape()),x.display(t,this.menu,{position:"click",data:this.hoveredArea});else if(this.p5.mouseButton==this.p5.LEFT&&!x.isOpen())switch(this.tool){case"test":e=this.hoveredArea.getHref(),void 0===n&&(n=400),void 0===i&&(i=300),window.open(e,"_blank","width=".concat(n,",height=").concat(i));break;case"delete":this.deleteArea(this.hoveredArea)}var e,n,i;this.selection.clear()},e.prototype.onOver=function(t){this.bgLayer.appear(),t.preventDefault()},e.prototype.onLeave=function(){this.bgLayer.disappear()},e.prototype.handeFile=function(t){var e=this;"image"==t.type?(this.img.data=this.p5.loadImage(t.data,(function(t){return e.resetView(t)})),this.img.file=t.file,this.map.getName()||(this.map.setName(t.name),this.settings.setValue("Map Name",this.map.getName()))):"json"==t.subtype&&fetch(t.data).then((function(t){return t.blob()})).then((function(t){var n=new FileReader;n.onload=function(){var t=n.result;"string"==typeof t&&e.importMap(t)},n.readAsText(t)})),this.bgLayer.disappear()},e.prototype.resetView=function(t){this.view.scale=1,this.view.transX=0,this.view.transY=0;var e=this.p5.width/t.width,n=this.p5.height/t.height;e<this.view.scale&&(this.view.scale=e),n<this.view.scale&&(this.view.scale=n),this.map.setSize(t.width,t.height)},e.prototype.zoom=function(t){var e=this.view.scale+t;if(e>this.zoomParams.min&&e<this.zoomParams.max){var n=this.mX()*t,i=this.mY()*t;this.view.scale=e,this.view.transX-=n,this.view.transY-=i}},e.prototype.drawImage=function(){this.img.data&&this.p5.image(this.img.data,0,0,this.img.data.width,this.img.data.height)},e.prototype.drawAreas=function(){for(var t=[this.tempArea].concat(this.map.getAreas()),e=t.length;e--;){var n=t[e];this.setAreaStyle(n),n.isDrawable()&&n.display(this.p5)}if(this.hoveredPoint){var i=this.hoveredPoint;this.p5.fill(0),this.p5.noStroke(),this.p5.ellipse(i.x,i.y,6/this.view.scale)}},e.prototype.setTool=function(t){this.tool=t,this.tempArea=new c},e.prototype.setCursor=function(){if(this.drawingTools.includes(this.tool))switch(this.tool){case"polygon":var t=this.tempArea;if(!t.isEmpty()&&t.isClosable(this.mCoord(),5/this.view.scale)){this.p5.cursor(this.p5.HAND);break}default:this.p5.cursor(this.p5.CROSS)}else if(this.p5.cursor(this.p5.ARROW),this.hoveredArea)switch(this.tool){case"test":case"delete":this.p5.cursor(this.p5.HAND);break;case"select":this.hoveredPoint||this.p5.cursor(this.p5.MOVE)}},e.prototype.setOutput=function(){switch(this.tool){case"test":case"select":if(this.mouseIsHoverSketch()){var t=this.hoveredArea?this.hoveredArea.getTitle():"";this.settings.setValue("Output",t)}}},e.prototype.setBackground=function(){this.p5.background(200),this.img.data||(this.p5.noStroke(),this.p5.fill(0),this.p5.textAlign(this.p5.CENTER,this.p5.CENTER),this.p5.textSize(15),this.p5.text("Drag and drop an image and/or a .map.json save file here",this.p5.width/2,this.p5.height/2))},e.prototype.setTitle=function(t){"test"==this.tool&&t&&t.getTitle()?this.p5.canvas.setAttribute("title",t.getTitle()):this.p5.canvas.removeAttribute("title")},e.prototype.setAreaStyle=function(t){var e=this.p5.color(255,255,255,178);"test"==this.tool&&(e=this.p5.color(255,0)),(("delete"==this.tool||"select"==this.tool)&&this.mouseIsHoverSketch()&&t==this.hoveredArea||this.selection.containsArea(t))&&(e=this.p5.color(255,200,200,178)),this.p5.fill(e),this.p5.strokeWeight(1/this.view.scale),"test"==this.tool?this.p5.noStroke():this.p5.stroke(0)},e.prototype.setTempArea=function(t){var e=[t];switch(this.tool){case"rectangle":this.tempArea=new h(e);break;case"circle":this.tempArea=new u(e);break;case"polygon":this.tempArea=new l(e),this.tempArea.addCoord(t)}},e.prototype.updateTempArea=function(){var t=this.drawingCoord();this.tempArea.isEmpty()||this.tempArea.updateLastCoord(t)},e.prototype.exportMap=function(){return JSON.stringify(new q(H,this.map),(function(t,e){return e instanceof p&&!(this instanceof q)?e.getName():e}))},e.prototype.save=function(){var e=new Blob([this.exportMap()],{encoding:"UTF-8",type:"text/plain;charset=UTF-8"});t(e,"".concat(this.map.getName(),".map.json"),"application/json")},e.prototype.importMap=function(t){var e=JSON.parse(t).map;this.map.setFromObject(e),this.settings.setValue("Map Name",e.name),this.settings.setValue("Default Area",e.hasDefaultArea),this.reset()},e.prototype.createArea=function(t){var e=this;this.map.addArea(t),this.undoManager.add({undo:function(){return t=e.map.shiftArea()},redo:function(){return e.map.addArea(t,!1)}})},e.prototype.deleteArea=function(t){var e=this,n=t.id;if(0===n)this.settings.setValue("Default Area",!1);else{var i=this.map.rmvArea(n);this.undoManager.add({undo:function(){return e.map.insertArea(t,i)},redo:function(){return e.map.rmvArea(n)}})}},e.prototype.moveArea=function(t,e){var n=this;!1!==this.map.moveArea(t.id,e)&&this.undoManager.add({undo:function(){return n.map.moveArea(t.id,-e)},redo:function(){return n.map.moveArea(t.id,e)}})},e.prototype.setAreaUrl=function(t){var e=t.getHref(),n=prompt("Enter the pointing url of this area",e||"http://");n&&(t.setHref(n),this.undoManager.add({undo:function(){return t.setHref(e)},redo:function(){return t.setHref(n)}}))},e.prototype.setAreaTitle=function(t){var e=t.getTitle(),n=prompt("Enter the title of this area",e||"");n&&(t.setTitle(n),this.undoManager.add({undo:function(){return t.setTitle(e)},redo:function(){return t.setTitle(n)}}))},e.prototype.setDefaultArea=function(t){var e=this;this.map.setDefaultArea(t),this.undoManager.add({undo:function(){e.map.setDefaultArea(!t),e.settings.setValue("Default Area",!t)},redo:function(){e.map.setDefaultArea(t),e.settings.setValue("Default Area",t)}})},e.prototype.clearAreas=function(){var t=this,e=this.map.getAreas(!1);this.map.clearAreas(),this.undoManager.add({undo:function(){return t.map.setAreas(e)},redo:function(){return t.map.clearAreas()}})},e.prototype.reset=function(){this.undoManager.clear()},e}()})(),i})()));
//# sourceMappingURL=image-map-creator.bundle.js.map